<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="card.CardDAO">
	<resultMap type="benefitVO" id="benefitMap">
		<result column="CATEGORY_KOR" property="categoryKor" />

	</resultMap>

	<resultMap type="cardVO" id="cardMap">
		<result column="CARD_CODE" property="cardCode" />
		<result column="CARD_NAME" property="cardName" />
		<result column="CARD_CATEGORY" property="cardCategory" />
		<result column="ANNUAL_FEE" property="annualFee" />

	</resultMap>


	<select id="selectBenefitList" resultType="list"
		resultMap="benefitMap">
		SELECT DISTINCT CATEGORY_KOR, CATEGORY FROM
		CARD_BENEFITS_CATEGORY
	</select>


	<select id="selectByFilter" parameterType="hashmap"
		resultType="cardVO" resultMap="cardMap">

		SELECT C.CARD_CODE, C.CARD_NAME, CARD_CATEGORY, ANNUAL_FEE FROM CARD
		C, CARD_BENEFITS B WHERE C.CARD_NAME=B.CARD_NAME
		<choose>

			<when test="cardName != null and !cardName.equals('')">
				and C.CARD_NAME like '%'||#{cardName}||'%'
			</when>
			<when test="cardCategory != null and !cardCategory.equals('')">
				and C.CARD_CATEGORY = #{cardCategory}
			</when>
			<when test="annualFeeRange_min != null and !annualFeeRange_min.equals('')">
				and C.ANNUAL_FEE BETWEEN #{annualFeeRange_min} AND #{annualFeeRange_max}
			</when>
		</choose>


	</select>



	<!-- <insert id="register" parameterType="memberVO"> INSERT INTO T_MEMBER(ID, 
		PW, NAME, MOBILE_NO, RRN, BIRTHDAY, AGE, GENDER, ISNATIVE, ADDRESS, ADDRESS_DETAIL) 
		VALUES (#{id}, #{pw}, #{name}, #{mobileNo}, #{rrn}, TO_DATE(#{birthday}), 
		#{age}, #{gender}, #{isNative}, #{address}, #{addressDetail}) </insert> -->

</mapper>